# Stripe支付设置 - 我来帮您！

## 🎯 您现在需要做什么？

我已经为您完成了所有代码集成，现在您只需要完成以下**5个简单步骤**：

### 📝 步骤概览

1. ✅ **注册Stripe账户** (5分钟)
2. ✅ **获取API密钥** (2分钟)
3. ✅ **在Vercel设置环境变量** (3分钟)
4. ✅ **重新部署** (1分钟)
5. ✅ **测试支付** (2分钟)

**总时间：约15分钟**

---

## 📖 详细步骤

### 步骤1：注册Stripe账户

1. 打开浏览器，访问：**https://stripe.com**
2. 点击右上角 **"Sign up"**（注册）
3. 输入您的邮箱和密码
4. 选择 **"多米尼加共和国"** (Dominican Republic) 作为业务所在地
5. 完成邮箱验证

> 💡 **提示**：如果已有Stripe账户，直接登录即可

---

### 步骤2：获取API密钥

1. 登录后，访问：**https://dashboard.stripe.com**
2. 点击左侧菜单 **"Developers"**（开发者）
3. 点击 **"API keys"**（API密钥）
4. 您会看到两个密钥：
   - **Publishable key**：`pk_test_...`（点击复制）
   - **Secret key**：`sk_test_...`（点击 "Reveal test key" 显示后复制）

> ⚠️ **重要**：先使用测试模式（test mode）的密钥，测试完成后再切换到生产模式

---

### 步骤3：在Vercel设置环境变量

1. 打开浏览器，访问：**https://vercel.com**
2. 登录您的Vercel账户
3. 找到项目 **"re-order"**，点击进入
4. 点击顶部菜单 **"Settings"**（设置）
5. 在左侧菜单找到 **"Environment Variables"**（环境变量），点击进入

#### 添加第一个环境变量：

- 点击 **"Add New"** 或 **"Add"** 按钮
- **Key（键）**：输入 `VITE_STRIPE_PUBLISHABLE_KEY`
- **Value（值）**：粘贴您从Stripe复制的 `pk_test_...` 密钥
- **Environment（环境）**：勾选所有三个选项
  - ✅ Production
  - ✅ Preview  
  - ✅ Development
- 点击 **"Save"** 保存

#### 添加第二个环境变量：

- 再次点击 **"Add New"**
- **Key（键）**：输入 `STRIPE_SECRET_KEY`
- **Value（值）**：粘贴您从Stripe复制的 `sk_test_...` 密钥
- **Environment（环境）**：勾选所有三个选项
  - ✅ Production
  - ✅ Preview
  - ✅ Development
- 点击 **"Save"** 保存

> ✅ **确认**：您应该看到两个环境变量都已添加

---

### 步骤4：重新部署应用

1. 在Vercel Dashboard，点击 **"Deployments"**（部署）
2. 找到最新的部署记录
3. 点击右侧的 **"..."** 菜单
4. 选择 **"Redeploy"**（重新部署）
5. 等待部署完成（通常1-3分钟）

> 💡 **提示**：部署完成后，状态会显示为 "Ready"（就绪）

---

### 步骤5：测试支付功能

1. 访问您的应用URL（例如：`https://re-order.vercel.app`）
2. 创建一个测试订单（添加商品到购物车）
3. 进入支付页面，选择 **"银行卡"** 或 **"Visa"** 支付方式
4. 使用Stripe测试卡号填写：
   - **卡号**：`4242 4242 4242 4242`
   - **有效期**：`12/34`（任意未来日期）
   - **CVV**：`123`（任意3位数字）
   - **邮编**：`12345`（任意5位数字）
5. 点击 **"确认"** 完成支付
6. 验证支付是否成功，订单状态是否更新

> ✅ **成功标志**：
> - 支付表单正常显示（Stripe安全表单）
> - 支付成功，没有错误提示
> - 订单状态更新为"已支付"
> - 可以在Stripe Dashboard → Payments 中看到支付记录

---

## 🔍 如果遇到问题

### 问题1：支付表单不显示
**检查：**
- Vercel环境变量中是否有 `VITE_STRIPE_PUBLISHABLE_KEY`
- 密钥是否正确（应该以 `pk_test_` 开头）
- 是否重新部署了应用

### 问题2：支付失败，提示"Payment gateway not configured"
**检查：**
- Vercel环境变量中是否有 `STRIPE_SECRET_KEY`
- 密钥是否正确（应该以 `sk_test_` 开头）
- 是否重新部署了应用

### 问题3：其他错误
**请告诉我：**
- 您在哪一步遇到问题？
- 看到了什么错误信息？
- 我可以帮您检查配置

---

## 📚 相关文档

我已经为您创建了以下详细文档：

1. **`STRIPE_SETUP_CHECKLIST.md`** - 快速检查清单
2. **`STRIPE_SETUP_STEP_BY_STEP.md`** - 详细步骤指南
3. **`STRIPE_QUICK_START.md`** - 快速开始指南
4. **`STRIPE_SETUP_GUIDE.md`** - 完整技术文档

---

## 💬 需要帮助？

如果您在设置过程中遇到任何问题，请告诉我：

1. **您当前在哪一步？**
   - 步骤1：注册Stripe账户
   - 步骤2：获取API密钥
   - 步骤3：设置环境变量
   - 步骤4：重新部署
   - 步骤5：测试支付

2. **遇到了什么错误？**
   - 请提供错误信息或截图

3. **我可以帮您：**
   - 检查配置是否正确
   - 排查错误原因
   - 提供更详细的指导

---

## ✅ 完成后

设置完成后，您的系统将支持：
- ✅ 多米尼加共和国当地银行卡支付
- ✅ 国际Visa卡支付
- ✅ Mastercard支付
- ✅ 其他Stripe支持的支付方式
- ✅ 安全的PCI DSS合规支付处理
- ✅ 3D Secure验证（如需要）

---

## 🔄 测试环境 vs 生产环境

**重要问题：测试环境和生产环境有什么区别？**

📖 **详细对比请查看：`STRIPE_TEST_VS_PRODUCTION.md`**

**简短回答：**
- ✅ 代码逻辑**完全相同**（99%相同）
- ✅ 如果测试环境没问题，生产环境也应该没问题
- ⚠️ 主要差异：API密钥不同、卡号不同、需要账户验证

**关键点：**
1. 测试环境使用测试密钥（`pk_test_...`）和测试卡号
2. 生产环境使用生产密钥（`pk_live_...`）和真实卡号
3. 生产环境需要完成Stripe账户验证和银行账户添加
4. 建议先在测试环境完成所有测试，再切换到生产环境

**祝您设置顺利！** 🎉
